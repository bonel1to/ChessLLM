# Шахматы с LLM ИИ - Полноэкранный режим

Полнофункциональная шахматная игра на Python с графическим интерфейсом, полноэкранным режимом, плавными анимациями движения фигур и противником на основе языковой модели через OpenRouter API.

## Возможности

- **Полноэкранный режим по умолчанию** с адаптивным размером доски
- Графический интерфейс на Pygame, оптимизированный для любого разрешения экрана
- **Плавные анимации движения фигур** 
- **ИИ-противник на основе языковой модели `--`**
- Интеллектуальные ходы с анализом позиции
- Подсветка последнего хода
- Сохранение и загрузка игр
- История ходов
- Подсветка выбранных фигур
- Автоматическое превращение пешек в ферзей
- Обработка окончания игры (мат, пат, ничья)
- Fallback к случайным ходам при ошибках LLM

## Требования

- Python 3.7+
- pygame
- python-chess
- openai
- Активный API ключ OpenRouter

## Установка

1. Распакуйте архив и перейдите в папку с игрой.

2. Запросите и вставте ключ openrouter в openrouter_config.py 

3. Установите зависимости:
```bash
pip install pygame python-chess openai
```

4. Запустите игру:
```bash
python main.py
```

## Управление

- **Мышь**: Выбор и перемещение фигур (кликните на фигуру, затем на целевую клетку)
- **N**: Новая игра
- **ESC**: Выход

## Как играть

1. Запустите программу.
2. Убедитесь, что API ключ OpenRouter добавлен.
3. Игра автоматически запустится в полноэкранном режиме.
4. Вы играете белыми фигурами против LLM ИИ (черные).
5. Кликните мышью на фигуру, которой хотите ходить.
6. Кликните на клетку, куда хотите переместить фигуру.
7. LLM ИИ автоматически сделает ответный ход с анимацией.

### Особенности:
- **Автоматический запуск**: Игра по умолчанию запускается в полноэкранном режиме
- **Адаптивный размер**: Доска автоматически масштабируется под размер экрана
- **Центрирование**: Доска всегда располагается по центру экрана
- **Оптимальное использование пространства**: Максимальный размер доски при сохранении места для информации

## Как работает LLM ИИ

### Процесс принятия решений:
1. **Анализ позиции**: LLM получает текущую позицию в FEN формате
2. **История игры**: Анализирует все предыдущие ходы в PGN формате
3. **Доступные ходы**: Получает список всех легальных ходов в UCI формате
4. **Выбор хода**: Использует свои знания шахмат для выбора лучшего хода
5. **При некорректном ответе LLM используется случайный легальный ход

### Промпт-инжиниринг:
- Четкие инструкции по формату ответа (только UCI код)
- Контекст текущей позиции и истории
- Список доступных ходов для выбора

## Структура проекта

- `main.py` - Основной файл игры с LLM ИИ, анимациями и полноэкранным режимом
- `openrouter_config.py` - Файл конфигурации API ключа
- `assets/` - Изображения шахматных фигур
- `saved_game.pkl` - Файл сохранения игры (создается автоматически)
- `README.md` - Документация

## Особенности

- Если изображения фигур не загружаются, программа автоматически создает простые замены
- Игра поддерживает все стандартные правила шахмат
- Интерфейс показывает статус LLM ИИ (думает/сделал ход/анимация)
- Отображается последний ответ LLM для отладки
- Автоматический fallback к случайным ходам при ошибках API
- Анимации не блокируют логику игры и работают асинхронно
- Полная поддержка различных разрешений экрана
- Оптимизированная производительность в полноэкранном режиме

## Устранение неполадок

## Системные требования

- **Минимальные**: Python 3.7+, 2 ГБ ОЗУ
- **Разрешение экрана**: От 800x600 до 4K и выше
- **Операционная система**: Windows

## Автор

Создано Sergei Kem (IT top)

